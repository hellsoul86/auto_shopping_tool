# auto_shopping_tool
叮咚自动抢菜工具

运行环境：

1.windows os
只在windows下开发了这个工具，其他平台不知道

2.airtest
下载地址：https://airtest.netease.com/
网易的移动端开源测试测试工具，自带python版本，无需单独安装python。
脑洞够大可以解锁很多想法

3.安卓手机一台
虽然airtest也能测试ios，但是没安卓方便，因此只测了安卓，本程序在小米Pro 10下成功运行，其他安卓手机不知道。
安卓手机需要做一些处理，最好是平时不用的，因为要开启的权限过大，没人能保证你的电脑是安全的是吧

4.安卓手机设置
开启usb调试
开启开发者选项里一大堆没开的功能，不用懂每个功能干啥用，只要是开启就拥有更多权限的就开，不然就关了
开启接通电源后永不息屏
关闭安全键盘，不然输入密码的环节是黑屏
用USB线连接手机和电脑
开启airtest，用adb连接手机，选择文件传输模式
成功看到画面后，Poco辅助窗选择Android，只要出现一堆com.xxxx的就表示解构完成
安卓机上会提示安装pocoservice和Yosemite，都要装
输入法打开yosemite，其他的关了


程序逻辑：

1.在首页启动，清理现有购物车所有商品。
2.将符合关键词的商品的每一项的前5个添加到购物车。
3.回到购物车，根据关键词清单，对匹配关键词的多个同类商品，只保留第一个匹配的，其余会去掉。
4.当关键词清单没有匹配所有对应的商品时，会反复在购物车刷新等待商品上架
5.当关键词清单匹配所有对应商品时，会进入结算
6.如果支付的时候没有运力，程序会反复尝试支付
7.直到有运力后，会尝试输入密码完成支付，如支付不成功，提示暂未营业，会反复尝试
8.支付成功，流程结束。

建议：

多个收货地址的把要配送的地址设为默认
建议对叮咚充值，这样只要支付密码就完成购买，我不是叮咚员工，仅仅是图方便，要用其他支付方式的自己实现。

使用教程：

修改以下部分的代码：
autoShopping.daily_products.append(DailyProduct(Keyword("速冻","水饺")))
根据自己喜好添加每天想要抢购的商品关键词，程序会根据关键词搜索到的符合条件的商品自动添加到购物车，无论有没有库存。

修改以下部分的代码：
autoShopping.goto_settle(111111)
把111111换成自己的叮咚支付密码
